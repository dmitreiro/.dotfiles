#!/bin/bash

FOLDER_PATH="$(realpath $(dirname "${BASH_SOURCE[0]}"))"

# config path list
P_I3="${HOME}/.config/i3"
P_I3STATUS="${HOME}/.config/i3status"
P_KITTY="${HOME}/.config/kitty"
P_TMUX="${HOME}/.config/tmux"
P_NVIM="${HOME}/.config/nvim"
P_VOLUMEICON="${HOME}/.config/volumeicon"

# define an associative array
declare -A CONFIG_PATHS=(
    [local/bin]="${HOME}/.local/bin"
    [i3]="${HOME}/.config/i3"
    [i3status]="${HOME}/.config/i3status"
    [kitty]="${HOME}/.config/kitty"
    [tmux]="${HOME}/.config/tmux"
    [nvim]="${HOME}/.config/nvim"
    [volumeicon]="${HOME}/.config/volumeicon"
    [cust_prompt]="${HOME}/.custom_prompt"
    [alias]="${HOME}/.bash_aliases"
    [bashrc]="${HOME}/.bashrc"
    [xinit]="${HOME}/.xinitrc"
)

ask() {
    read -p "$1 (Y/n): " ans
    [ -z ans ] || [ "$ans" = "y" ]
}

# main code

# folder loop
for key in "${!CONFIG_PATHS[@]}"; do
    if ask "Do you want to link $key?"; then
        if [ -d "${CONFIG_PATHS[$key]}" ]; then
            if ask "${CONFIG_PATHS[$key]} will be removed, do you want to proceed?"; then
                rm -rf "${CONFIG_PATHS[$key]}"
            else
                continue
            fi
        fi
        target="${CONFIG_PATHS[$key]//$HOME/$FOLDER_PATH}"
        ln -s "$target" "${CONFIG_PATHS[$key]}" 
    fi
done

echo "Done! :)"
exit 0
